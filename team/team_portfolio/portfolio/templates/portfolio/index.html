{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ team_info.name }} - Portfolio</title>
    
    <!-- Bootstrap CSS (for Grid & Utilities) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Swiper.js CSS CDN (for sliders) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS for Theme and Animations -->
    <style>
        :root {
            --bg-dark: #121828;
            --bg-card: #1c2333;
            --glow-cyan: #00e5ff;
            --glow-orange: #ff8c00;
            --text-light: #f0f0f0;
            --text-muted: #abb8c3;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding-top: 80px; 
        }

        /* --- FIXED HEADER --- */
        .site-header {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; padding: 1rem 2rem;
            background: rgba(18, 24, 40, 0.8); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; align-items: center;
        }
        .site-header img { height: 40px; width: 40px; margin-right: 1rem; }
        .site-header .team-name { font-size: 1.5rem; font-weight: 700; margin-bottom: 0; }

        .section {
            padding: 100px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0; transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .section.is-visible { opacity: 1; transform: translateY(0); }

        .section-title {
            font-weight: 700; font-size: 3rem; color: var(--glow-cyan);
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }

        .glass-card {
            background: var(--bg-card); border: 1px solid rgba(0, 229, 255, 0.1);
            border-radius: 16px; padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        .glass-card:hover { transform: translateY(-5px); box-shadow: 0 8px 30px rgba(0,0,0,0.3); }

        /* --- Text & Link Color Fixes --- */
        p, .lead, .small { color: var(--text-muted) !important; }
        .glass-card p, .glass-card .lead, .glass-card .small { color: var(--text-muted) !important; }
        h1, h2, h3, h4, h5, h6, strong { color: var(--text-light) !important; }
        .section-title { color: var(--glow-cyan) !important; }
        a { color: var(--text-muted); text-decoration: none; transition: color 0.3s ease; }
        a:hover { color: var(--glow-cyan); }
        .btn-primary { color: #000 !important; }
        .btn-outline-light { color: var(--text-light); }

        /* --- Swiper Slider Styles --- */
        .swiper-container { width: 100%; padding: 1rem 0; }
        .swiper-slide { width: auto; }
        .swiper-button-prev, .swiper-button-next {
            width: 44px; height: 44px; background: rgba(28, 35, 51, 0.8);
            backdrop-filter: blur(5px); border-radius: 50%; color: var(--glow-cyan) !important;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: background-color 0.3s ease;
            top: 50%; transform: translateY(-50%);
        }
        .swiper-button-prev:hover, .swiper-button-next:hover { background-color: #2a334e; }
        .swiper-button-prev::after, .swiper-button-next::after { font-size: 1rem !important; font-weight: bold; }
        .swiper-button-prev { left: -10px; }
        .swiper-button-next { right: -10px; }
        
        .project-contributions {
            background: rgba(0,0,0,0.2); border-radius: 12px;
            padding: 1.5rem; margin-top: 1.5rem;
        }
        .contributions-swiper { user-select: none; pointer-events: none; }
    </style>
</head>
<body class="text-light">

    <!-- FIXED HEADER -->
    <header class="site-header">
        <img src="{{ team_info.logo_url }}" alt="Team Logo">
        <h1 class="team-name">{{ team_info.name }}</h1>
    </header>

    <main>
        <!-- TEAM MEMBERS SECTION -->
        <section id="team" class="section">
            <div class="container text-center">
                <h2 class="section-title mb-2">Meet Our Team</h2>
                <p class="lead mb-5">Talented individuals united by a passion for excellence.</p>
                <div class="position-relative">
                    <div class="swiper-container team-swiper">
                        <div class="swiper-wrapper">
                            {% for member in team_members %}
                            <div class="swiper-slide" style="width: 320px;">
                                <div class="glass-card h-100 text-center">
                                    <img src="{{ member.image.url }}" class="rounded-circle img-fluid mx-auto mb-3" style="width: 100px; height: 100px; object-fit: cover;" alt="{{ member.name }}">
                                    <h4 class="fw-bold">{{ member.name }}</h4>
                                    <p class="mb-2" style="color: var(--glow-cyan);">{{ member.role }}</p>
                                    <p class="small">{{ member.bio }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="swiper-button-prev team-prev"></div>
                    <div class="swiper-button-next team-next"></div>
                </div>
            </div>
        </section>

        <!-- PROJECTS SECTION -->
        <section id="projects" class="section">
            <div class="container text-center">
                <h2 class="section-title mb-2">Our Projects</h2>
                <p class="lead mb-5">Showcasing our best work and collaborative efforts.</p>
                <div class="position-relative">
                    <div class="swiper-container project-swiper glass-card p-lg-4">
                        <div class="swiper-wrapper">
                            {% for project in projects %}
                            <div class="swiper-slide">
                                <div class="row align-items-center text-start">
                                    <div class="col-lg-6">
                                        <img src="{{ project.main_image.url }}" class="img-fluid rounded-3" alt="{{ project.title }}">
                                    </div>
                                    <div class="col-lg-6 p-4">
                                        <h3 class="fw-bold">{{ project.title }}</h3>
                                        <p class="mt-2">{{ project.description }}</p>
                                        <h5 class="mt-4">Technology Stack</h5>
                                        <p class="small">{{ project.tech_used }}</p>
                                        <div class="mt-4">
                                             <a href="{{ project.live_site_link }}" target="_blank" class="btn btn-primary" style="background-color: var(--glow-orange); border-color: var(--glow-orange);">Live Demo</a>
                                             <a href="{{ project.github_repo_link }}" target="_blank" class="btn btn-outline-light">View Code</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="swiper-button-prev project-prev"></div>
                    <div class="swiper-button-next project-next"></div>
                </div>
                <div class="project-contributions mt-4">
                    <h5 class="text-center mb-3">Team Contributions</h5>
                    <div class="swiper-container contributions-swiper">
                        <div class="swiper-wrapper">
                             {% for project in projects %}
                             <div class="swiper-slide">
                                 <div class="row">
                                    {% for contribution in project.contribution_set.all %}
                                    <div class="col-md-6 mb-2">
                                        <strong>{{ contribution.member.name }}:</strong> 
                                        <span>{{ contribution.contribution_text }}</span>
                                    </div>
                                    {% endfor %}
                                </div>
                             </div>
                             {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer id="contact" class="section">
             <div class="container">
                <div class="text-center">
                    <h2 class="section-title mb-2">Let's Connect</h2>
                    <p class="lead mb-5">Ready to bring your ideas to life? We'd love to hear from you.</p>
                </div>
                <div class="row g-4 justify-content-center">
                    <div class="col-lg-8">
                        <div class="glass-card h-100 p-4">
                            <h4 class="fw-bold">Start a Conversation</h4>
                            <p>Reach out via email or find us on social media.</p>
                            <p class="fs-4 mt-3"><a href="mailto:contact@yourteam.dev" style="color: var(--glow-cyan);">contact@yourteam.dev</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <!-- JS CDNs -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- The Final, Polished Animation Script -->
    <script>
        // --- 1. Animation on Scroll ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.15 });

        document.querySelectorAll('.section').forEach((section) => {
            observer.observe(section);
        });

        // --- 2. Team Slider ---
        const teamSwiper = new Swiper('.team-swiper', {
            loop: false,
            slidesPerView: 'auto',
            spaceBetween: 30,
            navigation: {
                nextEl: '.team-next',
                prevEl: '.team-prev',
            },
            breakpoints: {
                320: { slidesPerView: 1, spaceBetween: 20 },
                768: { slidesPerView: 2, spaceBetween: 30 },
                1200: { slidesPerView: 4, spaceBetween: 30 },
            }
        });
        
        // --- 3. Linked Project & Contribution Sliders ---
        const contributionsSwiper = new Swiper(".contributions-swiper", {
            loop: false,
            effect: 'fade',
            fadeEffect: { crossFade: true },
            autoHeight: true, // <-- THIS IS THE MAGIC LINE FOR SMOOTH HEIGHT
            allowTouchMove: false,
        });

        const projectSwiper = new Swiper(".project-swiper", {
            loop: false,
            effect: 'fade',
            fadeEffect: { crossFade: true },
            navigation: {
                nextEl: ".project-next",
                prevEl: ".project-prev",
            },
            controller: {
                control: contributionsSwiper,
            },
        });
    </script>
</body>
</html>